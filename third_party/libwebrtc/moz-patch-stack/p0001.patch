From: Michael Froman <mfroman@mozilla.com>
Date: Sat, 17 Jan 2026 14:02:10 -0600
Subject: (tmp-cherry-pick) Revert "Notify first packet received after
 receptiveness change" (26c01c78e6)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This reverts commit a14f6dc908f5e23c2b58062f5ae3bfbd7aec8502.

Reason for revert: Breaks downstream project

Original change's description:
> Notify first packet received after receptiveness change
>
> similar to NotifyFirstPacket but fires after changes to
> the receptiveness.
>
> No-IWYU: bot broken
> Bug: chromium:40821064
> Change-Id: I9fc9a229a13891dee2f286faadb8a53e54cd370d
> Reviewed-on: https://webrtc-review.googlesource.com/c/src/+/411380
> Reviewed-by: Harald Alvestrand <hta@webrtc.org>
> Reviewed-by: Henrik Bostr√∂m <hbos@webrtc.org>
> Commit-Queue: Philipp Hancke <philipp.hancke@googlemail.com>
> Cr-Commit-Position: refs/heads/main@{#46158}

Bug: chromium:40821064
No-Presubmit: true
No-Tree-Checks: true
No-Try: true
Change-Id: I55df9cb803b48c98329cf5169dd4e75d6e9c06bf
Reviewed-on: https://webrtc-review.googlesource.com/c/src/+/424741
Bot-Commit: Rubber Stamper <rubber-stamper@appspot.gserviceaccount.com>
Reviewed-by: Danil Chapovalov <danilchap@webrtc.org>
Commit-Queue: Fredrik Solenberg <solenberg@webrtc.org>
Reviewed-by: Harald Alvestrand <hta@webrtc.org>
Reviewed-by: Philipp Hancke <philipp.hancke@googlemail.com>
Cr-Commit-Position: refs/heads/main@{#46163}
---
 api/rtp_receiver_interface.h                  |  4 --
 pc/audio_rtp_receiver.cc                      |  7 ---
 pc/audio_rtp_receiver.h                       |  1 -
 pc/channel.cc                                 | 10 ----
 pc/channel.h                                  |  6 --
 pc/channel_interface.h                        |  3 -
 pc/peer_connection_integrationtest.cc         | 55 -------------------
 pc/rtp_receiver.h                             |  2 -
 pc/rtp_transceiver.cc                         | 34 +-----------
 pc/rtp_transceiver.h                          |  6 +-
 pc/test/integration_test_helpers.h            |  8 ---
 pc/test/mock_channel_interface.h              |  4 --
 pc/test/mock_rtp_receiver_internal.h          |  4 --
 pc/video_rtp_receiver.cc                      |  7 ---
 pc/video_rtp_receiver.h                       |  1 -
 sdk/android/api/org/webrtc/RtpReceiver.java   |  4 --
 .../webrtc/PeerConnectionEndToEndTest.java    | 20 +------
 sdk/android/src/jni/pc/rtp_receiver.cc        |  6 --
 .../peerconnection/RTCRtpReceiver+Private.h   |  2 -
 sdk/objc/api/peerconnection/RTCRtpReceiver.h  |  6 --
 sdk/objc/api/peerconnection/RTCRtpReceiver.mm |  9 ---
 21 files changed, 5 insertions(+), 194 deletions(-)

diff --git a/api/rtp_receiver_interface.h b/api/rtp_receiver_interface.h
index 9ac347b45f..8e301ee575 100644
--- a/api/rtp_receiver_interface.h
+++ b/api/rtp_receiver_interface.h
@@ -41,10 +41,6 @@ class RtpReceiverObserverInterface {
   // OnFirstPacketReceived when a packet is received specifically for its
   // SSRC/mid.
   virtual void OnFirstPacketReceived(MediaType media_type) = 0;
-  // Similar to the above but done whenever the receptiveness changed.
-  // TODO: crbug.com/40821064 - make virtual after Chromium roll.
-  virtual void OnFirstPacketReceivedAfterReceptiveChange(MediaType media_type) {
-  }
 
  protected:
   virtual ~RtpReceiverObserverInterface() {}
diff --git a/pc/audio_rtp_receiver.cc b/pc/audio_rtp_receiver.cc
index f4ef613e91..328207d214 100644
--- a/pc/audio_rtp_receiver.cc
+++ b/pc/audio_rtp_receiver.cc
@@ -357,11 +357,4 @@ void AudioRtpReceiver::NotifyFirstPacketReceived() {
   received_first_packet_ = true;
 }
 
-void AudioRtpReceiver::NotifyFirstPacketReceivedAfterReceptiveChange() {
-  RTC_DCHECK_RUN_ON(&signaling_thread_checker_);
-  if (observer_) {
-    observer_->OnFirstPacketReceivedAfterReceptiveChange(media_type());
-  }
-}
-
 }  // namespace webrtc
diff --git a/pc/audio_rtp_receiver.h b/pc/audio_rtp_receiver.h
index 30edffa74b..df88699e92 100644
--- a/pc/audio_rtp_receiver.h
+++ b/pc/audio_rtp_receiver.h
@@ -99,7 +99,6 @@ class AudioRtpReceiver : public ObserverInterface,
   void SetupUnsignaledMediaChannel() override;
   std::optional<uint32_t> ssrc() const override;
   void NotifyFirstPacketReceived() override;
-  void NotifyFirstPacketReceivedAfterReceptiveChange() override;
   void set_stream_ids(std::vector<std::string> stream_ids) override;
   void set_transport(
       scoped_refptr<DtlsTransportInterface> dtls_transport) override;
diff --git a/pc/channel.cc b/pc/channel.cc
index d4a95eacc1..a069448a3a 100644
--- a/pc/channel.cc
+++ b/pc/channel.cc
@@ -429,13 +429,6 @@ void BaseChannel::SetFirstPacketSentCallback(std::function<void()> callback) {
   on_first_packet_sent_ = std::move(callback);
 }
 
-void BaseChannel::SetPacketReceivedCallback_n(std::function<void()> callback) {
-  RTC_DCHECK_RUN_ON(network_thread());
-  RTC_DCHECK(!on_packet_received_n_ || !callback);
-
-  on_packet_received_n_ = std::move(callback);
-}
-
 void BaseChannel::OnTransportReadyToSend(bool ready) {
   RTC_DCHECK_RUN_ON(network_thread());
   RTC_DCHECK(network_initialized());
@@ -519,9 +512,6 @@ void BaseChannel::OnRtpPacket(const RtpPacketReceived& parsed_packet) {
                         << ToString();
     return;
   }
-  if (on_packet_received_n_) {
-    on_packet_received_n_();
-  }
   media_receive_channel()->OnPacketReceived(parsed_packet);
 }
 
diff --git a/pc/channel.h b/pc/channel.h
index faf87a2468..3cd0f919cb 100644
--- a/pc/channel.h
+++ b/pc/channel.h
@@ -151,9 +151,6 @@ class BaseChannel : public ChannelInterface,
   void SetFirstPacketReceivedCallback(std::function<void()> callback) override;
   void SetFirstPacketSentCallback(std::function<void()> callback) override;
 
-  void SetPacketReceivedCallback_n(std::function<void()> callback) override
-      RTC_RUN_ON(network_thread());
-
   // From RtpTransport - public for testing only
   void OnTransportReadyToSend(bool ready);
 
@@ -323,9 +320,6 @@ class BaseChannel : public ChannelInterface,
       RTC_GUARDED_BY(network_thread());
   std::function<void()> on_first_packet_sent_ RTC_GUARDED_BY(network_thread());
 
-  // Used to unmute.
-  std::function<void()> on_packet_received_n_ RTC_GUARDED_BY(network_thread());
-
   RtpTransportInternal* rtp_transport_ RTC_GUARDED_BY(network_thread()) =
       nullptr;
 
diff --git a/pc/channel_interface.h b/pc/channel_interface.h
index 73a1ff58b3..c1c05e9525 100644
--- a/pc/channel_interface.h
+++ b/pc/channel_interface.h
@@ -79,9 +79,6 @@ class ChannelInterface {
       std::function<void()> callback) = 0;
   virtual void SetFirstPacketSentCallback(std::function<void()> callback) = 0;
 
-  // Used to unmute.
-  virtual void SetPacketReceivedCallback_n(std::function<void()> callback) = 0;
-
   // Channel control
   virtual bool SetLocalContent(const MediaContentDescription* content,
                                SdpType type,
diff --git a/pc/peer_connection_integrationtest.cc b/pc/peer_connection_integrationtest.cc
index 291a7a12dd..938697cb00 100644
--- a/pc/peer_connection_integrationtest.cc
+++ b/pc/peer_connection_integrationtest.cc
@@ -215,61 +215,6 @@ TEST_P(PeerConnectionIntegrationTest,
                      }));
 }
 
-TEST_P(PeerConnectionIntegrationTest,
-       RtpReceiverObserverOnFirstPacketReceivedAfterInactive) {
-  if (sdp_semantics_ != SdpSemantics::kUnifiedPlan) {
-    GTEST_SKIP() << "Only supported in unified plan.";
-  }
-  ASSERT_TRUE(CreatePeerConnectionWrappers());
-  ConnectFakeSignaling();
-  caller()->AddAudioVideoTracks();
-  callee()->AddAudioVideoTracks();
-  // Start offer/answer exchange and wait for it to complete.
-  caller()->CreateAndSetAndSignalOffer();
-  ASSERT_THAT(WaitUntil([&] { return SignalingStateStable(); }, IsTrue()),
-              IsRtcOk());
-  // Should be one receiver each for audio/video.
-  EXPECT_EQ(2U, caller()->rtp_receiver_observers().size());
-  // Wait for all "first packet received" callbacks to be fired.
-  EXPECT_THAT(WaitUntil(
-                  [&] {
-                    return absl::c_all_of(
-                        caller()->rtp_receiver_observers(),
-                        [](const std::unique_ptr<MockRtpReceiverObserver>& o) {
-                          return o->first_packet_received();
-                        });
-                  },
-                  IsTrue(), {.timeout = kMaxWaitForFrames}),
-              IsRtcOk());
-
-  // Renegotiate, going inactive and back to sendrecv.
-  for (auto& transceiver : caller()->pc()->GetTransceivers()) {
-    transceiver->SetDirectionWithError(RtpTransceiverDirection::kInactive);
-  }
-  caller()->CreateAndSetAndSignalOffer();
-  ASSERT_THAT(WaitUntil([&] { return SignalingStateStable(); }, IsTrue()),
-              IsRtcOk());
-
-  callee()->ResetRtpReceiverObservers();
-  for (auto& transceiver : caller()->pc()->GetTransceivers()) {
-    transceiver->SetDirectionWithError(RtpTransceiverDirection::kSendRecv);
-  }
-  caller()->CreateAndSetAndSignalOffer();
-  ASSERT_THAT(WaitUntil([&] { return SignalingStateStable(); }, IsTrue()),
-              IsRtcOk());
-  EXPECT_THAT(
-      WaitUntil(
-          [&] {
-            return absl::c_all_of(
-                caller()->rtp_receiver_observers(),
-                [](const std::unique_ptr<MockRtpReceiverObserver>& o) {
-                  return o->first_packet_received_after_receptive_change();
-                });
-          },
-          IsTrue(), {.timeout = kMaxWaitForFrames}),
-      IsRtcOk());
-}
-
 TEST_P(PeerConnectionIntegrationTest, RtpSenderObserverOnFirstPacketSent) {
   ASSERT_TRUE(CreatePeerConnectionWrappers());
   ConnectFakeSignaling();
diff --git a/pc/rtp_receiver.h b/pc/rtp_receiver.h
index 6772016739..db3ba3e0e0 100644
--- a/pc/rtp_receiver.h
+++ b/pc/rtp_receiver.h
@@ -63,8 +63,6 @@ class RtpReceiverInternal : public RtpReceiverInterface {
   // Call this to notify the RtpReceiver when the first packet has been received
   // on the corresponding channel.
   virtual void NotifyFirstPacketReceived() = 0;
-  // Similar to the above but done whenever the receptive flag changed.
-  virtual void NotifyFirstPacketReceivedAfterReceptiveChange() = 0;
 
   // Set the associated remote media streams for this receiver. The remote track
   // will be removed from any streams that are no longer present and added to
diff --git a/pc/rtp_transceiver.cc b/pc/rtp_transceiver.cc
index 3881eb67a3..06b0079398 100644
--- a/pc/rtp_transceiver.cc
+++ b/pc/rtp_transceiver.cc
@@ -324,10 +324,6 @@ void RtpTransceiver::SetChannel(
           thread->PostTask(
               SafeTask(std::move(flag), [this]() { OnFirstPacketSent(); }));
         });
-    channel_->SetPacketReceivedCallback_n([this]() {
-      RTC_DCHECK_RUN_ON(context()->network_thread());
-      OnPacketReceived();
-    });
   });
   PushNewMediaChannel();
 
@@ -349,7 +345,6 @@ void RtpTransceiver::ClearChannel() {
   context()->network_thread()->BlockingCall([&]() {
     channel_->SetFirstPacketReceivedCallback(nullptr);
     channel_->SetFirstPacketSentCallback(nullptr);
-    channel_->SetPacketReceivedCallback_n(nullptr);
     channel_->SetRtpTransport(nullptr);
   });
 
@@ -499,25 +494,6 @@ void RtpTransceiver::OnFirstPacketReceived() {
   }
 }
 
-// RTC_RUN_ON(context()->network_thread())
-void RtpTransceiver::OnPacketReceived() {
-  if (!receptive_) {
-    return;
-  }
-  if (packet_notified_after_receptive_) {
-    return;
-  }
-  packet_notified_after_receptive_ = true;
-  thread_->PostTask([this]() {
-    if (stopping() || stopped()) {
-      return;
-    }
-    for (const auto& receiver : receivers_) {
-      receiver->internal()->NotifyFirstPacketReceivedAfterReceptiveChange();
-    }
-  });
-}
-
 void RtpTransceiver::OnFirstPacketSent() {
   for (const auto& sender : senders_) {
     sender->internal()->NotifyFirstPacketSent();
@@ -606,18 +582,13 @@ std::optional<RtpTransceiverDirection> RtpTransceiver::fired_direction() const {
 }
 
 bool RtpTransceiver::receptive() const {
+  RTC_DCHECK_RUN_ON(thread_);
   return receptive_;
 }
 
 void RtpTransceiver::set_receptive(bool receptive) {
   RTC_DCHECK_RUN_ON(thread_);
-  bool old_receptive = receptive_.exchange(receptive);
-  if (receptive && !old_receptive) {
-    context()->network_thread()->PostTask([&]() {
-      RTC_DCHECK_RUN_ON(context()->network_thread());
-      packet_notified_after_receptive_ = false;
-    });
-  }
+  receptive_ = receptive;
 }
 
 void RtpTransceiver::StopSendingAndReceiving() {
@@ -699,7 +670,6 @@ void RtpTransceiver::StopTransceiverProcedure() {
     sender->internal()->SetTransceiverAsStopped();
 
   // 3. Set transceiver.[[Receptive]] to false.
-  receptive_ = false;
   // 4. Set transceiver.[[CurrentDirection]] to null.
   current_direction_ = std::nullopt;
 }
diff --git a/pc/rtp_transceiver.h b/pc/rtp_transceiver.h
index 069c4434eb..6117feb0b1 100644
--- a/pc/rtp_transceiver.h
+++ b/pc/rtp_transceiver.h
@@ -13,7 +13,6 @@
 
 #include <stddef.h>
 
-#include <atomic>
 #include <functional>
 #include <memory>
 #include <optional>
@@ -312,7 +311,6 @@ class RtpTransceiver : public RtpTransceiverInterface {
     return *codec_lookup_helper_->GetCodecVendor();
   }
   void OnFirstPacketReceived();
-  void OnPacketReceived() RTC_RUN_ON(context()->network_thread());
   void OnFirstPacketSent();
   void StopSendingAndReceiving();
   // Tell the senders and receivers about possibly-new media channels
@@ -351,9 +349,7 @@ class RtpTransceiver : public RtpTransceiverInterface {
   bool created_by_addtrack_ = false;
   bool reused_for_addtrack_ = false;
   bool has_ever_been_used_to_send_ = false;
-  std::atomic<bool> receptive_ = false;
-  bool packet_notified_after_receptive_
-      RTC_GUARDED_BY(context()->network_thread()) = false;
+  bool receptive_ RTC_GUARDED_BY(thread_) = false;
 
   // Accessed on both thread_ and the network thread. Considered safe
   // because all access on the network thread is within an invoke()
diff --git a/pc/test/integration_test_helpers.h b/pc/test/integration_test_helpers.h
index c7a4adb1d3..192e5f00ab 100644
--- a/pc/test/integration_test_helpers.h
+++ b/pc/test/integration_test_helpers.h
@@ -196,21 +196,13 @@ class MockRtpReceiverObserver : public RtpReceiverObserverInterface {
     ASSERT_EQ(expected_media_type_, media_type);
     first_packet_received_ = true;
   }
-  void OnFirstPacketReceivedAfterReceptiveChange(webrtc::MediaType media_type) {
-    ASSERT_EQ(expected_media_type_, media_type);
-    first_packet_received_after_receptive_change_ = true;
-  }
 
   bool first_packet_received() const { return first_packet_received_; }
-  bool first_packet_received_after_receptive_change() const {
-    return first_packet_received_after_receptive_change_;
-  }
 
   virtual ~MockRtpReceiverObserver() {}
 
  private:
   bool first_packet_received_ = false;
-  bool first_packet_received_after_receptive_change_ = false;
   webrtc::MediaType expected_media_type_;
 };
 
diff --git a/pc/test/mock_channel_interface.h b/pc/test/mock_channel_interface.h
index ce01d5817b..ffcc528705 100644
--- a/pc/test/mock_channel_interface.h
+++ b/pc/test/mock_channel_interface.h
@@ -67,10 +67,6 @@ class MockChannelInterface : public ChannelInterface {
               SetFirstPacketSentCallback,
               (std::function<void()>),
               (override));
-  MOCK_METHOD(void,
-              SetPacketReceivedCallback_n,
-              (std::function<void()>),
-              (override));
   MOCK_METHOD(bool,
               SetLocalContent,
               (const webrtc::MediaContentDescription*, SdpType, std::string&),
diff --git a/pc/test/mock_rtp_receiver_internal.h b/pc/test/mock_rtp_receiver_internal.h
index baebd44361..046e7f7e88 100644
--- a/pc/test/mock_rtp_receiver_internal.h
+++ b/pc/test/mock_rtp_receiver_internal.h
@@ -75,10 +75,6 @@ class MockRtpReceiverInternal : public RtpReceiverInternal {
   MOCK_METHOD(void, SetupUnsignaledMediaChannel, (), (override));
   MOCK_METHOD(std::optional<uint32_t>, ssrc, (), (const, override));
   MOCK_METHOD(void, NotifyFirstPacketReceived, (), (override));
-  MOCK_METHOD(void,
-              NotifyFirstPacketReceivedAfterReceptiveChange,
-              (),
-              (override));
   MOCK_METHOD(void, set_stream_ids, (std::vector<std::string>), (override));
   MOCK_METHOD(void,
               set_transport,
diff --git a/pc/video_rtp_receiver.cc b/pc/video_rtp_receiver.cc
index 4006cc2657..402c27fabd 100644
--- a/pc/video_rtp_receiver.cc
+++ b/pc/video_rtp_receiver.cc
@@ -332,13 +332,6 @@ void VideoRtpReceiver::NotifyFirstPacketReceived() {
   received_first_packet_ = true;
 }
 
-void VideoRtpReceiver::NotifyFirstPacketReceivedAfterReceptiveChange() {
-  RTC_DCHECK_RUN_ON(&signaling_thread_checker_);
-  if (observer_) {
-    observer_->OnFirstPacketReceivedAfterReceptiveChange(media_type());
-  }
-}
-
 std::vector<RtpSource> VideoRtpReceiver::GetSources() const {
   RTC_DCHECK_RUN_ON(worker_thread_);
   auto current_ssrc = ssrc();
diff --git a/pc/video_rtp_receiver.h b/pc/video_rtp_receiver.h
index 6bf8c50891..04a1aac70c 100644
--- a/pc/video_rtp_receiver.h
+++ b/pc/video_rtp_receiver.h
@@ -86,7 +86,6 @@ class VideoRtpReceiver : public RtpReceiverInternal {
   void SetupUnsignaledMediaChannel() override;
   std::optional<uint32_t> ssrc() const override;
   void NotifyFirstPacketReceived() override;
-  void NotifyFirstPacketReceivedAfterReceptiveChange() override;
   void set_stream_ids(std::vector<std::string> stream_ids) override;
   void set_transport(
       scoped_refptr<DtlsTransportInterface> dtls_transport) override;
diff --git a/sdk/android/api/org/webrtc/RtpReceiver.java b/sdk/android/api/org/webrtc/RtpReceiver.java
index f2f5dce26a..d18259c569 100644
--- a/sdk/android/api/org/webrtc/RtpReceiver.java
+++ b/sdk/android/api/org/webrtc/RtpReceiver.java
@@ -20,10 +20,6 @@ public class RtpReceiver {
     // Called when the first audio or video packet is received.
     @CalledByNative("Observer")
     public void onFirstPacketReceived(MediaStreamTrack.MediaType media_type);
-    // Called when the first audio or video packet is received after
-    // receptiveness changed.
-    @CalledByNative("Observer")
-    public void onFirstPacketReceivedAfterReceptiveChange(MediaStreamTrack.MediaType media_type);
   }
 
   private long nativeRtpReceiver;
diff --git a/sdk/android/instrumentationtests/src/org/webrtc/PeerConnectionEndToEndTest.java b/sdk/android/instrumentationtests/src/org/webrtc/PeerConnectionEndToEndTest.java
index 3569068d14..53ec95f234 100644
--- a/sdk/android/instrumentationtests/src/org/webrtc/PeerConnectionEndToEndTest.java
+++ b/sdk/android/instrumentationtests/src/org/webrtc/PeerConnectionEndToEndTest.java
@@ -424,27 +424,11 @@ public class PeerConnectionEndToEndTest {
       }
     }
 
-    @Override
-    // TODO(bugs.webrtc.org/8491): Remove NoSynchronizedMethodCheck suppression.
-    @SuppressWarnings("NoSynchronizedMethodCheck")
-    public synchronized void onFirstPacketReceivedAfterReceptiveChange(
-        MediaStreamTrack.MediaType mediaType) {
-      if (mediaType == MediaStreamTrack.MediaType.MEDIA_TYPE_AUDIO) {
-        expectedFirstAudioPacket--;
-      } else {
-        expectedFirstVideoPacket--;
-      }
-      if (expectedFirstAudioPacket < 0 || expectedFirstVideoPacket < 0) {
-        throw new RuntimeException("Unexpected call of onFirstPacketReceived");
-      }
-    }
-
     // TODO(bugs.webrtc.org/8491): Remove NoSynchronizedMethodCheck suppression.
     @SuppressWarnings("NoSynchronizedMethodCheck")
     public synchronized void expectFirstPacketReceived() {
-      // We expect both onFirstPacketReceived and onFirstPacketReceivedAfterReceptiveChange.
-      expectedFirstAudioPacket = 2;
-      expectedFirstVideoPacket = 2;
+      expectedFirstAudioPacket = 1;
+      expectedFirstVideoPacket = 1;
     }
 
     // TODO(bugs.webrtc.org/8491): Remove NoSynchronizedMethodCheck suppression.
diff --git a/sdk/android/src/jni/pc/rtp_receiver.cc b/sdk/android/src/jni/pc/rtp_receiver.cc
index 3b88f6a920..13e92fa085 100644
--- a/sdk/android/src/jni/pc/rtp_receiver.cc
+++ b/sdk/android/src/jni/pc/rtp_receiver.cc
@@ -47,12 +47,6 @@ class RtpReceiverObserverJni : public RtpReceiverObserverInterface {
     Java_Observer_onFirstPacketReceived(env, j_observer_global_,
                                         NativeToJavaMediaType(env, media_type));
   }
-  void OnFirstPacketReceivedAfterReceptiveChange(
-      MediaType media_type) override {
-    JNIEnv* const env = AttachCurrentThreadIfNeeded();
-    Java_Observer_onFirstPacketReceivedAfterReceptiveChange(
-        env, j_observer_global_, NativeToJavaMediaType(env, media_type));
-  }
 
  private:
   const jni_zero::ScopedJavaGlobalRef<jobject> j_observer_global_;
diff --git a/sdk/objc/api/peerconnection/RTCRtpReceiver+Private.h b/sdk/objc/api/peerconnection/RTCRtpReceiver+Private.h
index 1ded95b6dd..0c051bc654 100644
--- a/sdk/objc/api/peerconnection/RTCRtpReceiver+Private.h
+++ b/sdk/objc/api/peerconnection/RTCRtpReceiver+Private.h
@@ -23,8 +23,6 @@ class RtpReceiverDelegateAdapter : public RtpReceiverObserverInterface {
   RtpReceiverDelegateAdapter(RTC_OBJC_TYPE(RTCRtpReceiver) * receiver);
 
   void OnFirstPacketReceived(webrtc::MediaType media_type) override;
-  void OnFirstPacketReceivedAfterReceptiveChange(
-      webrtc::MediaType media_type) override;
 
  private:
   __weak RTC_OBJC_TYPE(RTCRtpReceiver) * receiver_;
diff --git a/sdk/objc/api/peerconnection/RTCRtpReceiver.h b/sdk/objc/api/peerconnection/RTCRtpReceiver.h
index 4bb783c421..2877a4c12b 100644
--- a/sdk/objc/api/peerconnection/RTCRtpReceiver.h
+++ b/sdk/objc/api/peerconnection/RTCRtpReceiver.h
@@ -48,12 +48,6 @@ RTC_OBJC_EXPORT
     - (void)rtpReceiver : (RTC_OBJC_TYPE(RTCRtpReceiver) *)
                               rtpReceiver didReceiveFirstPacketForMediaType
     : (RTCRtpMediaType)mediaType;
-/** Called when the first RTP packet is received after a change in
- * receptiveness.
- */
-- (void)rtpReceiver:(RTC_OBJC_TYPE(RTCRtpReceiver) *)rtpReceiver
-    didReceiveFirstPacketForMediaTypeAfterReceptiveChange:
-        (RTCRtpMediaType)mediaType;
 
 @end
 
diff --git a/sdk/objc/api/peerconnection/RTCRtpReceiver.mm b/sdk/objc/api/peerconnection/RTCRtpReceiver.mm
index ed675f80ef..78de7c0a42 100644
--- a/sdk/objc/api/peerconnection/RTCRtpReceiver.mm
+++ b/sdk/objc/api/peerconnection/RTCRtpReceiver.mm
@@ -36,15 +36,6 @@ void RtpReceiverDelegateAdapter::OnFirstPacketReceived(
       didReceiveFirstPacketForMediaType:packet_media_type];
 }
 
-void RtpReceiverDelegateAdapter::OnFirstPacketReceivedAfterReceptiveChange(
-    webrtc::MediaType media_type) {
-  RTCRtpMediaType packet_media_type =
-      [RTC_OBJC_TYPE(RTCRtpReceiver) mediaTypeForNativeMediaType:media_type];
-  RTC_OBJC_TYPE(RTCRtpReceiver) *receiver = receiver_;
-  [receiver.delegate rtpReceiver:receiver
-      didReceiveFirstPacketForMediaTypeAfterReceptiveChange:packet_media_type];
-}
-
 }  // namespace webrtc
 
 @implementation RTC_OBJC_TYPE (RTCRtpReceiver) {
